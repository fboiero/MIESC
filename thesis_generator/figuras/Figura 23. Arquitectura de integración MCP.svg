<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1100 800" font-family="Arial, Helvetica, sans-serif">
  <!-- Background -->
  <rect width="1100" height="800" fill="#ffffff"/>
  
  <!-- Title -->
  <text x="550" y="40" text-anchor="middle" font-size="26" font-weight="bold" fill="#2c3e50">
    Flujo de Interacci√≥n - MIESC + Claude Desktop (MCP)
  </text>
  
  <!-- Main container -->
  <rect x="50" y="70" width="1000" height="710" fill="#f8f9fa" rx="10" stroke="#3498db" stroke-width="2"/>
  
  <!-- Top row: Usuario -> Claude -> MCP Client -->
  
  <!-- Usuario -->
  <rect x="100" y="110" width="150" height="100" fill="#3498db" rx="10" stroke="#2980b9" stroke-width="2"/>
  <text x="175" y="155" text-anchor="middle" font-size="18" font-weight="bold" fill="white">Usuario</text>
  <text x="175" y="185" text-anchor="middle" font-size="28">üë§</text>
  
  <!-- Arrow to Claude -->
  <defs>
    <marker id="arrowRight" markerWidth="10" markerHeight="8" refX="9" refY="4" orient="auto">
      <polygon points="0 0, 10 4, 0 8" fill="#555"/>
    </marker>
    <marker id="arrowDown" markerWidth="10" markerHeight="8" refX="5" refY="8" orient="auto">
      <polygon points="0 0, 10 0, 5 8" fill="#555"/>
    </marker>
    <marker id="arrowLeft" markerWidth="10" markerHeight="8" refX="1" refY="4" orient="auto">
      <polygon points="10 0, 0 4, 10 8" fill="#27ae60"/>
    </marker>
    <marker id="arrowUp" markerWidth="10" markerHeight="8" refX="5" refY="0" orient="auto">
      <polygon points="0 8, 10 8, 5 0" fill="#27ae60"/>
    </marker>
  </defs>
  
  <line x1="250" y1="160" x2="330" y2="160" stroke="#555" stroke-width="3" marker-end="url(#arrowRight)"/>
  
  <!-- Claude Desktop -->
  <rect x="345" y="110" width="180" height="100" fill="#9b59b6" rx="10" stroke="#8e44ad" stroke-width="2"/>
  <text x="435" y="150" text-anchor="middle" font-size="18" font-weight="bold" fill="white">Claude</text>
  <text x="435" y="175" text-anchor="middle" font-size="16" fill="#f5eef8">Desktop</text>
  <text x="435" y="200" text-anchor="middle" font-size="12" fill="#e8daef">LLM Interface</text>
  
  <!-- Arrow to MCP Client -->
  <line x1="525" y1="160" x2="605" y2="160" stroke="#555" stroke-width="3" marker-end="url(#arrowRight)"/>
  
  <!-- MCP Client -->
  <rect x="620" y="110" width="180" height="100" fill="#f39c12" rx="10" stroke="#d68910" stroke-width="2"/>
  <text x="710" y="150" text-anchor="middle" font-size="18" font-weight="bold" fill="white">MCP Client</text>
  <text x="710" y="180" text-anchor="middle" font-size="14" fill="#fef9e7">(JSON-RPC)</text>
  
  <!-- Arrow down from MCP Client -->
  <line x1="710" y1="210" x2="710" y2="270" stroke="#555" stroke-width="3" marker-end="url(#arrowDown)"/>
  
  <!-- MIESC MCP Server Box -->
  <rect x="200" y="290" width="700" height="380" fill="#e8f6f3" rx="12" stroke="#1abc9c" stroke-width="3"/>
  
  <!-- Server header -->
  <rect x="200" y="290" width="700" height="55" fill="#1abc9c" rx="12"/>
  <rect x="200" y="330" width="700" height="15" fill="#1abc9c"/>
  <text x="550" y="325" text-anchor="middle" font-size="20" font-weight="bold" fill="white">MIESC MCP SERVER</text>
  <text x="850" y="325" text-anchor="end" font-size="14" fill="#d1f2eb">(localhost:3000)</text>
  
  <!-- Tool Handler -->
  <rect x="250" y="370" width="200" height="90" fill="#27ae60" rx="8" stroke="#1e8449" stroke-width="2"/>
  <text x="350" y="410" text-anchor="middle" font-size="16" font-weight="bold" fill="white">Tool</text>
  <text x="350" y="435" text-anchor="middle" font-size="16" fill="#d5f5e3">Handler</text>
  
  <!-- Resource Handler -->
  <rect x="500" y="370" width="200" height="90" fill="#3498db" rx="8" stroke="#2980b9" stroke-width="2"/>
  <text x="600" y="410" text-anchor="middle" font-size="16" font-weight="bold" fill="white">Resource</text>
  <text x="600" y="435" text-anchor="middle" font-size="16" fill="#d6eaf8">Handler</text>
  
  <!-- Arrows down from handlers -->
  <line x1="350" y1="460" x2="350" y2="510" stroke="#555" stroke-width="2" marker-end="url(#arrowDown)"/>
  <line x1="600" y1="460" x2="600" y2="510" stroke="#555" stroke-width="2" marker-end="url(#arrowDown)"/>
  
  <!-- MIESC Adapter Registry -->
  <rect x="250" y="530" width="600" height="120" fill="#2c3e50" rx="10" stroke="#1a252f" stroke-width="2"/>
  <text x="550" y="565" text-anchor="middle" font-size="18" font-weight="bold" fill="white">MIESC ADAPTER REGISTRY</text>
  
  <!-- Tool boxes inside registry -->
  <rect x="280" y="585" width="100" height="45" fill="#27ae60" rx="6"/>
  <text x="330" y="613" text-anchor="middle" font-size="14" font-weight="bold" fill="white">Slither</text>
  
  <rect x="400" y="585" width="100" height="45" fill="#9b59b6" rx="6"/>
  <text x="450" y="613" text-anchor="middle" font-size="14" font-weight="bold" fill="white">Mythril</text>
  
  <rect x="520" y="585" width="100" height="45" fill="#e74c3c" rx="6"/>
  <text x="570" y="613" text-anchor="middle" font-size="14" font-weight="bold" fill="white">Echidna</text>
  
  <rect x="640" y="585" width="100" height="45" fill="#f39c12" rx="6"/>
  <text x="690" y="613" text-anchor="middle" font-size="14" font-weight="bold" fill="white">GPTScan</text>
  
  <text x="770" y="613" text-anchor="middle" font-size="18" fill="#95a5a6">...</text>
  
  <!-- Return path - curved line back to Usuario -->
  <path d="M 200 500 Q 120 500 120 350 Q 120 200 175 210" 
        fill="none" stroke="#27ae60" stroke-width="3" marker-end="url(#arrowUp)"/>
  
  <!-- Return label -->
  <rect x="70" y="700" width="960" height="55" fill="#27ae60" rx="8"/>
  <text x="550" y="735" text-anchor="middle" font-size="18" font-weight="bold" fill="white">
    ‚Üê Resultados interpretados en lenguaje natural por Claude
  </text>
</svg>
